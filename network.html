<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Yutong 人际关系网络图</title>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      overflow: hidden;
    }

    .header {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      padding: 20px;
      text-align: center;
      color: white;
      z-index: 100;
    }

    .header h1 {
      font-size: 28px;
      font-weight: 300;
      margin-bottom: 8px;
    }

    .header p {
      font-size: 14px;
      opacity: 0.8;
    }

    #network {
      width: 100vw;
      height: 100vh;
    }

    .node {
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .node:hover {
      filter: brightness(1.2);
    }

    .node-circle {
      stroke: #fff;
      stroke-width: 3px;
      filter: drop-shadow(0 4px 8px rgba(0,0,0,0.2));
    }

    .node-text {
      font-size: 14px;
      font-weight: 500;
      text-anchor: middle;
      dominant-baseline: middle;
      fill: white;
      text-shadow: 0 1px 3px rgba(0,0,0,0.3);
      pointer-events: none;
    }

    .link {
      stroke: rgba(255, 255, 255, 0.6);
      stroke-width: 2px;
      filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
    }

    .central-node .node-circle {
      stroke-width: 4px;
      filter: drop-shadow(0 6px 12px rgba(0,0,0,0.3));
    }

    .central-node .node-text {
      font-size: 16px;
      font-weight: 600;
    }

    .tooltip {
      position: absolute;
      background: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 8px 12px;
      border-radius: 6px;
      font-size: 12px;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.3s ease;
      z-index: 1000;
    }

    .controls {
      position: absolute;
      bottom: 20px;
      left: 20px;
      color: white;
      font-size: 12px;
      opacity: 0.7;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }

    .central-node {
      animation: pulse 3s ease-in-out infinite;
    }
  </style>
</head>
<body>
  <div class="header">
    <h1>Yutong 的人际关系网络</h1>
    <p>拖拽节点探索连接关系 • 悬停查看详情</p>
  </div>

  <svg id="network"></svg>
  
  <div class="tooltip" id="tooltip"></div>
  
  <div class="controls">
    <div>💡 拖拽节点重新排列</div>
    <div>🔍 悬停节点查看详情</div>
  </div>

  <script>
    // 设置SVG
    const width = window.innerWidth;
    const height = window.innerHeight;

    // 网络数据
    const data = {
      nodes: [
        { id: "yutong", name: "Yutong", type: "central", color: "#ff6b6b", description: "核心人物" },
        { id: "google", name: "Google", type: "company", color: "#4285f4", description: "科技巨头公司" },
        { id: "koto", name: "Koto", type: "company", color: "#00d4aa", description: "设计工作室" },
        { id: "wolff-olins", name: "Wolff Olins", type: "company", color: "#ff9500", description: "品牌咨询公司" }
      ],
      links: [
        { source: "yutong", target: "google", relationship: "工作关系" },
        { source: "yutong", target: "koto", relationship: "合作伙伴" },
        { source: "yutong", target: "wolff-olins", relationship: "项目协作" }
      ]
    };

    const svg = d3.select("#network")
      .attr("width", width)
      .attr("height", height);

    const tooltip = d3.select("#tooltip");

    // 初始化节点位置
    data.nodes.forEach((node, i) => {
      if (node.type === "central") {
        node.x = width / 2;
        node.y = height / 2;
      } else {
        const angle = (i - 1) * (2 * Math.PI / 3);
        node.x = width / 2 + Math.cos(angle) * 200;
        node.y = height / 2 + Math.sin(angle) * 200;
      }
    });

    // 创建力导向图
    const simulation = d3.forceSimulation(data.nodes)
      .force("link", d3.forceLink(data.links).id(d => d.id).distance(150))
      .force("charge", d3.forceManyBody().strength(-500))
      .force("center", d3.forceCenter(width / 2, height / 2))
      .force("collision", d3.forceCollide().radius(60));

    // 创建连线
    const link = svg.append("g")
      .selectAll("line")
      .data(data.links)
      .enter().append("line")
      .attr("class", "link");

    // 创建节点组
    const node = svg.append("g")
      .selectAll("g")
      .data(data.nodes)
      .enter().append("g")
      .attr("class", d => d.type === "central" ? "node central-node" : "node")
      .call(d3.drag()
        .on("start", dragstarted)
        .on("drag", dragged)
        .on("end", dragended));

    // 添加圆圈
    node.append("circle")
      .attr("class", "node-circle")
      .attr("r", d => d.type === "central" ? 35 : 25)
      .attr("fill", d => d.color);

    // 添加文字
    node.append("text")
      .attr("class", "node-text")
      .text(d => d.name)
      .attr("dy", "0.35em");

    // 鼠标事件
    node
      .on("mouseover", function(event, d) {
        tooltip
          .style("opacity", 1)
          .html(`<strong>${d.name}</strong><br/>${d.description}`)
          .style("left", (event.pageX + 10) + "px")
          .style("top", (event.pageY - 10) + "px");
      })
      .on("mouseout", function() {
        tooltip.style("opacity", 0);
      })
      .on("mousemove", function(event) {
        tooltip
          .style("left", (event.pageX + 10) + "px")
          .style("top", (event.pageY - 10) + "px");
      });

    // 更新位置
    simulation.on("tick", () => {
      link
        .attr("x1", d => d.source.x)
        .attr("y1", d => d.source.y)
        .attr("x2", d => d.target.x)
        .attr("y2", d => d.target.y);

      node
        .attr("transform", d => `translate(${d.x},${d.y})`);
    });

    // 拖拽函数
    function dragstarted(event, d) {
      if (!event.active) simulation.alphaTarget(0.3).restart();
      d.fx = d.x;
      d.fy = d.y;
    }

    function dragged(event, d) {
      d.fx = event.x;
      d.fy = event.y;
    }

    function dragended(event, d) {
      if (!event.active) simulation.alphaTarget(0);
      d.fx = null;
      d.fy = null;
    }

    // 响应式调整
    window.addEventListener('resize', () => {
      const newWidth = window.innerWidth;
      const newHeight = window.innerHeight;
      
      svg.attr("width", newWidth).attr("height", newHeight);
      simulation.force("center", d3.forceCenter(newWidth / 2, newHeight / 2));
      simulation.alpha(0.3).restart();
    });
  </script>
</body>
</html>



